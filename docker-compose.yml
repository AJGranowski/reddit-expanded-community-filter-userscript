services:
  build:
    build:
      network: none
    cap_drop: ["ALL"]
    command: ["run", "clean-verify"]
    entrypoint: ["npm"]
    networks: ["node"]
    security_opt: ["no-new-privileges:true"]
    volumes:
      # Bind the current directory to the working directory inside the container.
      - type: "bind"
        source: "./"
        target: "/app"

      # Rename "docker.npmrc" to ".npmrc"
      - type: "bind"
        read_only: true
        source: "./docker.npmrc"
        target: "/app/.npmrc"
    
    working_dir: "/app"

networks:
  node: